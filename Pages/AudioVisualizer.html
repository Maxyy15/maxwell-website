<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Audio Visualizer — Project</title>
    <link rel="stylesheet" href="../Styles/ProjectPageStyle.css" />
  </head>

  <body>
    <div id="matrix-bg"></div>

    <div class="project-container">
      <a href="../index.html" class="back-btn">← Back to Portfolio</a>

      <h1>Audio Visualizer</h1>

      <img class="project-banner" src="../Images/AudioVisualizer.png" alt="" />

      <p class="description">
        This audio visualizer was made in C++ using OpenFrameworks to help
        visualize it. It uses several different addons to help take in audio
        process it using FFT (Fast Fourier Transform).
      </p>

      <h2>Features</h2>
      <ul class="feature-list">
        <li>Multiple different color settings</li>
        <li>Togglable settings</li>
        <li>Works with microphone and desktop audio</li>
      </ul>

      <h2>Screenshots</h2>
      <div class="screenshot-grid">
        <img src="../Images/AudioVis1.png" />
        <img src="../Images/AudioVis2.png" />
        <img src="../Images/AudioVis3.png" />
        <img src="../Images/AudioVis4.png" />
      </div>

      <div class="video-container">
        <iframe
          width="560"
          height="315"
          src="https://www.youtube.com/embed/Vg0cayGtgEA?si=ZUrzfHI6WZ7YXcDc"
          title="YouTube video player"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          referrerpolicy="strict-origin-when-cross-origin"
          allowfullscreen
        ></iframe>
      </div>
    </div>

    <script>
      const colours = [
        "#ff0000",
        "#ff7f00",
        "#ffff00",
        "#00ff00",
        "#00ffff",
        "#0000ff",
        "#8b00ff",
      ];

      const canvas = document.createElement("canvas");
      const ctx = canvas.getContext("2d");
      document.getElementById("matrix-bg").appendChild(canvas);

      const letters = "[];/?!&*%$#@{}:<>|=+";
      const fontSize = 16;

      let columns;
      let drops = [];

      function setup() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        columns = Math.floor(canvas.width / fontSize);
        drops = Array(columns).fill(1);
      }

      setup();

      let resizeTimeout;
      window.addEventListener("resize", () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(() => {
          setup();
        }, 150);
      });

      function draw() {
        ctx.fillStyle = "rgba(0, 0, 0, 0.08)";

        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "#00ff55";
        ctx.font = fontSize + "px monospace";

        for (let i = 0; i < drops.length; i++) {
          ctx.fillStyle = colours[Math.floor(Math.random() * colours.length)];

          const text = letters[Math.floor(Math.random() * letters.length)];

          ctx.fillText(text, i * fontSize, drops[i] * fontSize);

          if (drops[i] * fontSize > canvas.height && Math.random() > 0.97) {
            drops[i] = 0;
          }
          drops[i]++;
        }
      }
      setInterval(draw, 35);
    </script>
  </body>
</html>
